<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GAY GUY NEWS NETWORK</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/blasten/turn.js/turn.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #f7ded7;
      font-family: sans-serif;
      text-align: center;
      overflow: hidden;
    }

    #flipbook {
      margin: 1rem auto 0; /* small top margin */
      position: relative;
    }

    #flipbook .page {
      width: 50%; /* each page takes half of the flipbook width */
      height: 100%;
      background: white;
      cursor: pointer;
    }

    img.page-image {
      width: 100%;
      height: 100%;
      object-fit: cover; /* fill page area */
      display: block;
    }
  </style>
</head>
<body>

<div id="flipbook"></div>

<script>
// PNG page paths
const pngPages = [
'png3x/00A-FRONT COVER.png',
'png3x/00B-CONTRIBUTORS.png',
'png3x/01-IN THIS EDITION.png',
'png3x/02-MISSION STATEMENT.png',
'png3x/03-RECOMMENDED READING.png',
'png3x/04-THINGS WE LIKE-1.png',
'png3x/05-THINGS WE LIKE-2.png',
'png3x/06-OBITUARIES.png',	
'png3x/07-CRAFTERNOON'S.png',	
'png3x/08-SLOPPING THE BEAST-1.png',
'png3x/09-SLOPPING THE BEAST-2.png',
'png3x/11-AGONY GUNCLE.png',
'png3x/12-EVENTS-0.png',
'png3x/13-EVENTS-1.png',
'png3x/14-EVENTS-2.png',
'png3x/15-EVENTS-3.png',
'png3x/16-EVENTS-4.png',
'png3x/17-EVENTS-00.png',
'png3x/18-WELL YESSS.png',
'png3x/99-BACK COVER.png'// even number of pages
];

const flipbook = document.getElementById('flipbook');

// A4 aspect ratio
const pageAspect = 1.414; // height / width of one page
const spreadAspect = pageAspect / 2; // height / width for two pages side-by-side â‰ˆ 0.707

function getFlipbookSize() {
  // largest size that fits viewport while preserving aspect ratio
  const maxW = window.innerWidth * 0.95;
  const maxH = window.innerHeight * 0.95;

  // height = spreadAspect * width
  let width = maxW;
  let height = width * spreadAspect;

  if (height > maxH) {
    // too tall, shrink width
    height = maxH;
    width = height / spreadAspect;
  }

  return { width, height };
}

// Build pages
pngPages.forEach(src => {
  const pageDiv = document.createElement('div');
  pageDiv.classList.add('page');

  const img = document.createElement('img');
  img.src = src;
  img.classList.add('page-image');

  pageDiv.appendChild(img);
  flipbook.appendChild(pageDiv);
});

// Init turn.js with computed size
const size = getFlipbookSize();

$('#flipbook').turn({
  width: size.width,
  height: size.height,
  autoCenter:true
});

// resize on window change
$(window).on('resize', () => {
  const s = getFlipbookSize();
  $('#flipbook').turn('size', s.width, s.height);
});

// click navigation
$('#flipbook').on('click', function(e){
  const rect = flipbook.getBoundingClientRect();
  const clickX = e.clientX - rect.left;
  if(clickX < rect.width/2){
    $(this).turn('previous');
  } else {
    $(this).turn('next');
  }
});

// keyboard navigation
document.addEventListener('keydown', e => {
  if(e.key === 'ArrowLeft') $('#flipbook').turn('previous');
  if(e.key === 'ArrowRight') $('#flipbook').turn('next');
});
</script>

</body>
</html>
